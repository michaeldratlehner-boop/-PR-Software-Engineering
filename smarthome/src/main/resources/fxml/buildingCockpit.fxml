<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="at.jku.se.smarthome.controllers.BuildingController"
            style="-fx-background-color:#f2f2f2;">

    <VBox prefWidth="980" prefHeight="640" alignment="TOP_CENTER">
        <padding>
            <Insets top="18" right="32" bottom="24" left="32"/>
        </padding>

        <!-- ZURÜCK -->
        <Hyperlink text="← Zurück zur Startseite"
                   onAction="#backToDashboard"
                   style="-fx-font-size:12; -fx-text-fill:#333333;"/>

        <Region prefHeight="18"/>

        <!-- ======= STACKED: BUILDING CARD + ROOMS CARD ======= -->
        <VBox spacing="18" prefWidth="904" maxWidth="904" fillWidth="true">

            <!-- ===== BUILDING CARD ===== -->
            <VBox fx:id="houseCard" spacing="12" styleClass="card">

                <VBox spacing="4">
                    <Label text="Ihr Smart Home" styleClass="h1"/>
                    <Label text="Verwalten Sie Ihr Gebäude" styleClass="muted"/>
                </VBox>

                <!-- KEIN HAUS -->
                <VBox fx:id="noHouseBox" spacing="10">
                    <Label text="Noch kein Gebäude vorhanden." styleClass="muted"/>
                    <HBox alignment="CENTER_RIGHT">
                        <Button text="+ Gebäude"
                                onAction="#addHouse"
                                styleClass="btnPrimary"/>
                    </HBox>
                </VBox>

                <!-- HAUS VORHANDEN -->
                <VBox fx:id="hasHouseBox" spacing="10" visible="false" managed="false">

                    <GridPane hgap="12" vgap="8">
                        <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="muted"/>
                        <Label fx:id="houseNameLabel" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="Stockwerke:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="muted"/>
                        <Label fx:id="houseFloorsLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Adresse:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="muted"/>
                        <Label fx:id="houseAddressLabel" GridPane.rowIndex="2" GridPane.columnIndex="1" wrapText="true"/>

                        <Label text="Standort:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="muted"/>
                        <Label fx:id="houseLocationLabel" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                    </GridPane>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Button text="Freigeben" onAction="#openShareHouse"
                                style="-fx-background-color:white;
                                       -fx-text-fill:#333333;
                                       -fx-border-color:#cccccc;
                                       -fx-border-radius:12;
                                       -fx-background-radius:12;
                                       -fx-padding:6 18 6 18;"/>
                        <Button text="Bearbeiten" onAction="#editHouse" styleClass="btnSecondary"/>
                        <Button text="Löschen" onAction="#deleteHouse" styleClass="btnDanger"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- ===== ROOMS CARD ===== -->
            <VBox spacing="12"
                  VBox.vgrow="ALWAYS"
                  style="-fx-background-color:#e0e0e0; -fx-background-radius:20;">
                <padding>
                    <Insets top="24" right="28" bottom="24" left="28"/>
                </padding>

                <VBox spacing="2">
                    <Label text="Räume im ausgewählten Gebäude"
                           style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill:#222;"/>
                    <Label text="Erstellen, zuordnen und verwalten Sie Räume."
                           style="-fx-font-size:11; -fx-text-fill:#555555;"/>
                </VBox>

                <Region prefHeight="8"/>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                            style="-fx-background-color:transparent;">
                    <VBox fx:id="roomsListBox" spacing="10"/>
                </ScrollPane>

                <HBox alignment="CENTER_RIGHT">
                    <Button text="+ Raum"
                            onAction="#openCreateRoom"
                            style="-fx-background-color:#333333;
                                   -fx-text-fill:white;
                                   -fx-padding:4 18 4 18;"/>
                </HBox>
            </VBox>

        </VBox>
    </VBox>

</AnchorPane>
